{% extends 'master/panel_dashboard.html' %}
{% load static %}
{% block settings_tab_name %}
<title>{{settings.tab_name}} | مدیریت</title>
{% endblock settings_tab_name %} 
{% block contentpanel_dashboard %}
<!-- =======================
Author list START -->
<section class="py-4">
	<div class="container">
    <!-- Author list title START -->
		<div class="row g-4 pb-4">
			<div class="col-12">
				<div class="d-sm-flex justify-content-between align-items-center">
					<h1 class="mb-sm-0 h3">لیست نویسندگان</h1>			
					<a class="btn btn-sm btn-primary mb-0" data-bs-toggle="modal" data-bs-target="#AddAuthor_Modal"><i class="fas fa-plus me-2"></i>ثبت نویسنده جدید</a>
				</div>
			</div>
		</div>
		<!-- Author list title START -->
		<div class="row g-4">
			<div class="col-12">
				<!-- Card START -->
				<div class="card border">
					<!-- Card header START -->
					<div class="card-header border-bottom p-3">
						<!-- Search and select START -->
						<div class="row g-3 align-items-center justify-content-between">
							<!-- Search bar -->
							<div class="col-md-8">
								<form class="rounded position-relative">
									<input class="form-control bg-transparent" type="search" placeholder="جستجو" aria-label="Search">
									<button class="btn bg-transparent border-0 px-2 py-0 position-absolute top-50 end-0 translate-middle-y" type="submit"><i class="fas fa-search fs-6 "></i></button>
								</form>
							</div>
						</div>
						<!-- Search and select END -->
					</div>
					<!-- Card header END -->

					<!-- Card body START -->
					<div class="card-body p-3 pb-0">
						<!-- Tabs content START -->
						<div class="tab-content py-0 my-0">

							<!-- Tabs content item START -->
							<div class="tab-pane fade show active" id="nav-list-tab">
								<!-- Table START -->
								<div class="table-responsive border-0">
									<table class="table align-middle p-4 mb-0 table-hover">
										<!-- Table head -->
										<thead class="table-dark">
											<tr>
												<th scope="col" class="border-0 rounded-start">نام نویسنده</th>
												<th scope="col" class="border-0">تاریخ تولد</th>
												<th scope="col" class="border-0">تعداد اخبار</th>
												<th scope="col" class="border-0">ایمیل</th>
												<th scope="col" class="border-0 rounded-end">فعالیت</th>
											</tr>
										</thead>

										<!-- Table body START -->
										<tbody id="author-table-body" class="border-top-0">
											<!-- Table row -->
											{% include 'master/includes/author_list_table.html' %}
										</tbody>
										<!-- Table body END -->
									</table>
								</div>
								<!-- Table END -->
							</div>
							<!-- Tabs content item END -->

						</div>
						<!-- Tabs content END -->
					</div>
					<!-- Card body END -->

					<!-- Card Footer START -->
					<div class="card-footer p-3">
						<!-- Pagination START -->
						<div class="d-sm-flex justify-content-sm-between align-items-sm-center">
							<!-- Content -->
							<p class="mb-sm-0 text-center text-sm-start">
								نمایش {{ author.start_index }} تا {{ author.end_index }} از {{ author.paginator.count }}
							</p>
							<!-- Pagination -->
							<nav id="author-pagination" class="mb-sm-0 d-flex justify-content-center" aria-label="navigation">
								{% include 'master/includes/author_pagination.html' %}
							</nav>
						</div>
						<!-- Pagination END -->
					</div>
					<!-- Card Footer END -->
				</div>
				<!-- Card END -->
			</div>
			
			<div class="col-12">
				<!-- Card START -->
				<div class="card border">

					<!-- Card header START -->
					<div class="card-header border-bottom p-3">
						<h5 class="mb-2 mb-sm-0">درخواست های جدید</h5>
					</div>
					<!-- Card header END -->

					<!-- Card body START -->
					<div class="card-body p-3">
						<!-- Table START -->
						<div class="table-responsive border-0">
							<table class="table align-middle p-4 mb-0 table-hover">
								<!-- Table head -->
								<thead class="table-dark">
									<tr>
										<th scope="col" class="border-0 rounded-start">نام نویسنده</th>
										<th scope="col" class="border-0">ایمیل</th>
										<th scope="col" class="border-0 rounded-end">عملیات</th>
									</tr>
								</thead>

								<!-- Table body START -->
								<tbody id="author_table" class="border-top-0">
									<!-- Table row -->
									{% include 'master/includes/author_status_list_table.html' %}
								</tbody>
								<!-- Table body END -->
							</table>
						</div>
						<!-- Table END -->
					</div>
					<!-- Card body END -->
					<div class="card-footer p-3">
						<!-- Pagination START -->
						<div class="d-sm-flex justify-content-sm-between align-items-sm-center">
							<!-- Content -->
							<p class="mb-sm-0 text-center text-sm-start">
								نمایش {{ author2.start_index }} تا {{ author2.end_index }} از {{ author2.paginator.count }}
							</p>
							<!-- Pagination -->
							<nav class="mb-sm-0 d-flex justify-content-center" aria-label="navigation">
								{% include 'master/includes/author_pagination2.html' %}
							</nav>
						</div>
						<!-- Pagination END -->
					</div>
				</div>
				<!-- Card END -->
			</div>
		</div>
	</div>
</section>
<!-- =======================
Author list END -->

<div class="modal fade" id="AddAuthor_Modal" tabindex="-1" aria-labelledby="AddAuthorLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <!-- Modal header -->
            <div class="modal-header">
                <h5 class="modal-title" id="AddAuthorLabel">ثبت نویسنده</h5>
                <button type="button" class="btn btn-sm btn-light text-dark mb-0" data-bs-dismiss="modal" aria-label="Close"><i class="bi bi-x fs-5"></i></button>
            </div>
            <!-- Modal body -->
			<form action="{% url 'master_author_create_submit' %}" method="POST" enctype="multipart/form-data" id="addAuthorForm">
				{% csrf_token %}
            <div class="modal-body">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label for="firstName" class="form-label">نام</label>
                            <input type="text" class="form-control" id="firstName" name="firstName" required>
                        </div>
                        <div class="col-md-6">
                            <label for="lastName" class="form-label">نام خانوادگی</label>
                            <input type="text" class="form-control" id="lastName" name="lastName" required>
                        </div>
                        <div class="col-md-6">
                            <label for="nationalCode" class="form-label">کد ملی</label>
                            <input type="text" class="form-control" id="nationalCode" name="nationalCode" required>
                        </div>
                        <div class="col-md-6">
                            <label for="phone" class="form-label">شماره تلفن</label>
                            <input type="tel" class="form-control" id="phone" name="phone" required>
                        </div>
                        <div class="col-md-6">
                            <label for="email" class="form-label">ایمیل</label>
                            <input type="email" class="form-control" id="email" name="email" required>
                        </div>
                        <div class="col-md-6">
                            <label for="username" class="form-label">نام کاربری</label>
                            <input type="text" class="form-control" id="username" name="username" required>
                        </div>
                        <div class="col-md-6">
                            <label for="birthdate" class="form-label">تاریخ تولد</label>
                            <input type="date" class="form-control" id="birthdate" name="birthdate" required>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">جنسیت</label>
                            <div class="d-flex">
                                <div class="form-check me-3">
                                    <input class="form-check-input" type="radio" name="gender" id="male" value="male" required>
                                    <label class="form-check-label" for="male">مرد</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="gender" id="female" value="female" required>
                                    <label class="form-check-label" for="female">زن</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-12">
                            <label for="address" class="form-label">آدرس</label>
                            <textarea class="form-control" id="address" name="address" rows="2"></textarea>
                        </div>
                        <div class="col-12">
                            <label for="biography" class="form-label">بیوگرافی</label>
                            <textarea class="form-control" id="biography" name="biography" rows="3"></textarea>
                        </div>
                        <div class="col-md-6">
                            <label for="profile" class="form-label">تصویر پروفایل</label>
                            <input type="file" class="form-control" id="profile" name="profile" accept="image/*">
                        </div>
                        <div class="col-md-6">
                            <label for="slug" class="form-label">Slug</label>
                            <input type="text" class="form-control" id="slug" name="slug" required>
                        </div>
                    </div>
				</div>
				<!-- Modal footer -->
				<div class="modal-footer">
					<button type="submit" class="btn btn-primary">ثبت</button>
					<button type="button" class="btn btn-danger-soft my-0" data-bs-dismiss="modal">بستن</button>
				</div>
			</form>
        </div>
    </div>
</div>


<!-- Popup modal for reviwe START -->
{% for i in author_status %}
<div class="modal fade" id="viewAuthor_{{i.id}}" tabindex="-1" aria-labelledby="viewAuthorLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered">
		<div class="modal-content">
			<!-- Modal header -->
			<div class="modal-header">
				<h5 class="modal-title" id="viewAuthorLabel">اطلاعات نویسنده</h5>
				<button type="button" class="btn btn-sm btn-light text-dark mb-0" data-bs-dismiss="modal" aria-label="Close"><i class="bi bi-x fs-5"></i></button>
			</div>
			<!-- Modal body -->
			<div class="modal-body">
				<div class="row g-3">
                    <div class="col-sm-6">
                        <p><strong>نام و نام خانوادگی:</strong> {{i.get_full_name}}</p>
                    </div>
                    <div class="col-sm-6">
                        <p><strong>شماره تلفن:</strong> {{i.mobile}}</p>
                    </div>
                    <div class="col-sm-6">
                        <p><strong>تاریخ تولد:</strong> {{i.date_birth}}</p>
                    </div>
                    <div class="col-sm-6">
                        <p><strong>ایمیل:</strong> {{i.email}}</p>
                    </div>
                    <div class="col-sm-6">
                        <p><strong>کد ملی:</strong> {{i.national_id}}</p>
                    </div>
                    <div class="col-sm-6">
                        <p><strong>نام کاربری:</strong> {{i.username}}</p>
                    </div>
                    <div class="col-sm-6">
                        <p><strong>جنسیت:</strong> {{i.get_gender_display}}</p>
                    </div>
					<div class="col-12">
                        <p><strong>بیوگرافی:</strong></p>
                        <p>{{i.bio}}</p>
                    </div>
                </div>
			</div>
			<!-- Modal footer -->
			<div class="modal-footer">
				<button type="button" class="btn btn-danger-soft my-0" data-bs-dismiss="modal">بستن</button>
			</div>
		</div>
	</div>
</div>
{% endfor %}
<!-- Popup modal for Author END -->


{% endblock contentpanel_dashboard %}
{% block link_js %}

<script src="{% static 'master/' %}js/sweetalert.js"></script>
<script src="{% static 'master/' %}js/delete_swal.js"></script>
<script src="{% static 'master/' %}js/ajax.js"></script>
<script src="{% static 'master/' %}js/ajax_tabel_author.js"></script>


{% endblock link_js %}